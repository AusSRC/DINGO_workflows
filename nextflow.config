profiles {
    carnaby {
            process {
                executor = 'slurm'
                queue = 'cpu'
                module = ['singularity']

                withName: sofia {
                    module = ['mpich', 'singularity']
                    executor = 'slurm'
                    clusterOptions = '--mem-per-cpu=48G'
                    queue = 'cpu'
                }

            }

            params {
                SCRATCH_ROOT = "/mnt/shared"
                WORKDIR = "/mnt/shared/dingo"
                SINGULARITY_CACHEDIR = "/mnt/shared/dingo/apps/singularity"

                CASDA_CREDENTIALS_CONFIG = "/mnt/shared/dingo/config/casda.ini"
                SOFIA_PARAMETER_FILE = "/mnt/shared/dingo/config/sofia.par"
                S2P_TEMPLATE = "/mnt/shared/dingo/config/s2p_setup.ini"
                DATABASE_ENV = "/mnt/shared/dingo/config/database.env"

                SOFIA_CONFIG_DIR = "/mnt/shared/dingo/pilot/sofia_param"
                VALIDATE_WORK_DIR = "/mnt/shared/dingo/pilot/working"
            }

            process.module = 'singularity'
            singularity {
                enabled = true
                autoMounts = true
                envWhitelist = 'SINGULARITY_BINDPATH, SINGULARITYENV_LD_LIBRARY_PATH'
                cacheDir = "/mnt/shared/dingo/apps/singularity/"
                runOptions = "--bind /mnt:/mnt"
            }

            docker.enabled = false
    }

}

params {
    METADATA_SUBDIR = "metadata"
    RUN_SUBDIR = "run"
    FOOTPRINT_SUBDIR = "data/footprints"
    MOSAICS_SUBDIR = "data/mosaics"

    MOSAIC_OUTPUT_FILENAME = "mosaic"
    SOFIA_OUTPUTS_DIRNAME = "outputs"
    LINMOS_CONFIG_FILENAME = "linmos.config"
    LINMOS_LOG_FILE = "askap.linmos.log"
    SOFIAX_CONFIG_FILENAME = "sofiax.ini"
    WALLMERGE_OUTPUT = "mom0.fits"
    REGION = ""
    RUN_SOFIA = "1"
    RUN_SOFIAX = "1"

    CASDA_DOWNLOAD_IMAGE = "aussrc/casda_download:latest"
    CASDA_DOWNLOAD_IMAGE_NAME = "aussrc-casda_download-latest"
    OBSERVATION_METADATA_IMAGE = "aussrc/observation_metadata:latest"
    OBSERVATION_METADATA_IMAGE_NAME = "aussrc-observation_metadata-latest"
    METADATA_IMAGE = "aussrc/metadata_tools:latest"
    METADATA_IMAGE_NAME = "aussrc-metadata_tools-latest"
    WALLABY_COMPONENTS_IMAGE = "aussrc/wallaby_scripts:latest"
    WALLABY_COMPONENTS_IMAGE_NAME = "aussrc-wallaby_scripts-latest"
    UPDATE_LINMOS_CONFIG_IMAGE = "aussrc/update_linmos_config:latest"
    UPDATE_LINMOS_CONFIG_IMAGE_NAME = "aussrc-update_linmos_config-latest"
    LINMOS_IMAGE = "csirocass/askapsoft:1.9.1-casacore3.5.0-mpich"
    LINMOS_IMAGE_NAME = "askapsoft"
    S2P_SETUP_IMAGE = "aussrc/s2p_setup:latest"
    S2P_SETUP_IMAGE_NAME = "aussrc-s2p_setup-latest"
    UPDATE_SOFIAX_CONFIG_IMAGE = "aussrc/update_sofiax_config:latest"
    UPDATE_SOFIAX_CONFIG_IMAGE_NAME = "aussrc-update_sofiax_config-latest"
    SOFIA_IMAGE = "astroaustin/sofia:v0.0.1c"
    SOFIA_IMAGE_NAME = "astroaustin-sofia-v0.0.1c"
    SOFIAX_IMAGE = "aussrc/sofiax:latest"
    SOFIAX_IMAGE_NAME = "aussrc-sofiax-latest"
    GET_DSS_IMAGE = "aussrc/dss_image:latest"
    GET_DSS_IMAGE_NAME = "aussrc-dss_image-latest"
    WALLMERGE_IMAGE = "aussrc/wallmerge:v0.1.0"
    WALLMERGE_IMAGE_NAME = "aussrc-wallmerge-v0.1.0"
    GAMA_IMAGE = "aussrc/dingo_validate"
    GAMA_IMAGE_NAME = "aussrc-dingo_validate"

}